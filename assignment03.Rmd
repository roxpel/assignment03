---
title: "Assignment 03"
author: "Roxane Peloux"
date: "2/9/2020"
output: html_document
---


# Better Life Performances of OECD countries based on OECD's Better Life Index data 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:
```{r}
library(readr)
BetterLifeIndex <- read_csv("BetterLifeIndex.csv")
View(BetterLifeIndex)

library(dplyr)
library(ggplot2)
library(tidyverse)
library(stringr)
```

```{r}
names(BetterLifeIndex) 
str(BetterLifeIndex)
```
```{r}
unique(BetterLifeIndex$Indicator)
unique(BetterLifeIndex$Country)
unique(BetterLifeIndex$Unit)
```

```{r}

# These are interesting

BetterLifeIndex_2 <- BetterLifeIndex %>%
  select(Country, Indicator, Inequality, Value) %>%
  filter(Country == "New Zealand" | Country == "Japan" | Country == "Brazil" | Country == "France" | Country == "South Africa", Indicator == "Homicide rate" | Indicator == "Labour Market Insecurity" | Indicator == "Employees working very long hours" | Indicator == "Air pollution" | Indicator == "Long-term unemployment rate" | Indicator == "Dwellings without basic facilities", Inequality == "Total")

BetterLifeIndex_3 <- BetterLifeIndex %>%
  select(Country, Indicator, Inequality, Value) %>%
  filter(Indicator == "Homicide rate" | Indicator == "Labour Market Insecurity" | Indicator == "Employees working very long hours" | Indicator == "Air pollution" | Indicator == "Long-term unemployment rate" | Indicator == "Dwellings without basic facilities", Inequality == "Total")



#######



BetterLifeIndex_European_bad <- BetterLifeIndex %>%
  select(Country, Indicator, Inequality, Value) %>%
  filter(Country == "Austria" | Country == "Belgium" | Country == "Czech Republic" | Country == "Denmark" | Country == "Finland" | Country == "France" | Country == "Germany" | Country == "Greece" | Country == "Hungary" | Country == "Iceland" | Country == "Ireland" | Country == "Italy" | Country == "Luxembourg" | Country == "Netherlands" | Country == "Norway" | Country == "Poland" | Country == "Slovak Republic" | Country == "Spain" | Country == "Sweden" | Country == "Switzerland" | Country == "United Kingdom" | Country == "Estonia" | Country == "Latvia" | Country == "Russia" | Country == "Slovenia", Indicator == "Homicide rate" | Indicator == "Labour Market Insecurity" | Indicator == "Employees working very long hours" | Indicator == "Air pollution" | Indicator == "Long-term unemployment rate" | Indicator == "Dwellings without basic facilities", Inequality == "Total")


view(BetterLifeIndex)
```
```{r}

ggplot(BetterLifeIndex_European_bad, aes(x = reorder(Country, -Value), y = Value, fill = Indicator)) + 
  geom_bar(stat = "identity") +
  coord_flip() +
  labs(title = "Better life index rankings for European OECD countries", x = "Country", y = "Average score")
  
  
### WITH THE FOOTNOTE
  ggplot(BetterLifeIndex_European_bad, aes(x = reorder(Country, -Value), y = Value, fill = Indicator)) + geom_bar(stat = "identity") +
  coord_flip() +
  labs(title = "Better life index rankings for European OECD countries", x = "Country", y = "Average score") +
  labs(bottom = textGrob("The Average score for the different indicators is calculated in percentages, scores, ratio, US dollar, years, micrograms per cubic meter, or hours.")) 
  
```





```{r}

### HIDE NUMBERS AND ADD THEM WITHIN THE SLICES.
BetterLifeIndex_France <- BetterLifeIndex_European_bad %>%
  select(Country, Indicator, Inequality, Value) %>%
  filter(Country == "France")

ggplot(BetterLifeIndex_France, aes(x = "", y = Value, fill = Indicator)) +
  geom_bar(width = 1, stat='identity') + coord_polar("y") + 
  labs(title = "OECD Better Life Index Performance of France", x = "", y = "") +
  theme(plot.title = element_text(hjust = 0.5))

```
```{r}

# Graph for Education: Educational attainment, Student Skills, Years in education

BetterLifeIndex_European_Education <- BetterLifeIndex %>%
  select(Country, Indicator, Inequality, Value) %>%
  filter(Country == "Austria" | Country == "Belgium" | Country == "Czech Republic" | Country == "Denmark" | Country == "Finland" | Country == "France" | Country == "Germany" | Country == "Greece" | Country == "Hungary" | Country == "Iceland" | Country == "Ireland" | Country == "Italy" | Country == "Luxembourg" | Country == "Netherlands" | Country == "Norway" | Country == "Poland" | Country == "Slovak Republic" | Country == "Spain" | Country == "Sweden" | Country == "Switzerland" | Country == "United Kingdom" | Country == "Estonia" | Country == "Latvia" | Country == "Russia" | Country == "Slovenia", Indicator == "Educational attainment" | Indicator == "Student skills" | Indicator == "Years in education", Inequality == "Total")

ggplot(BetterLifeIndex_European_Education, aes(x = reorder(Country, -Value), y = Value, fill = Indicator)) + 
  geom_bar(stat = "identity") +
  coord_flip() +
  labs(title = "Better life index performance in education for European OECD countries", x = "Country", y = "Average score")




```

```{r}
BetterLifeIndex_pct <- BetterLifeIndex %>%
  select(Country, Indicator, Inequality, Unit, Value) %>%
  filter(Inequality == "Total", Unit == "Percentage")

count(BetterLifeIndex_pct, vars = Unit, wt_var = Country)

BetterLifeIndex_pct_France <- BetterLifeIndex_pct %>%
  select(Country, Indicator, Inequality, Unit, Value) %>%
  filter(Country == "France")


```








